/**
 * @note This file is auto-generated. Do not modify!
 */
// clang-format off

/* ------------------------------- Includes ------------------------------- */

#include <math.h>
#include <string.h>
#include "app_canTx.h"


/* ------------------------------- Structs -------------------------------- */

/**
 * Struct for holding all messages transmitted by BMS (i.e. the TX table).
 */
typedef struct
{
    {%- for msg in messages %}
    {{ msg.c_type() }} {{ msg.name }_signals};
    {%- endfor %}
} {{node}}_TxMsgs;

/* -------------------------- Private Variables --------------------------- */

static {{BMS_BMSShdnNodeStatus_signals}}_TxMsgs tx_table;

/* ------------------------- Function Definitions ------------------------- */

void app_canTx_init()
{
    memset(&tx_table, 0, sizeof({{node}}_TxMsgs));
    {%- for msg in messages %}
    {%- for signal in msg.signals %}
    app_canTx_{{ signal.name }}_set({{ signal.start_val_marcro() }});
    {%- endfor %}
    {%- endfor %}
}

{%- for msg in messages %}
{%- for signal in msg.signals %}
void app_canTx_{{ signal.name }}_set({{ signal.datatype() }} value)
{
    {{ if signal.max_val is defined -}}
    if (value > {{ signal.max_val }})
    {
        value = {{ signal.max_val }};
    }
    {{- endif }}
    {{ if signal.min_val is defined -}}
    if (value < {{ signal.min_val }})
    {
        value = {{ signal.min_val }};
    }
    {{- endif }}
    tx_table.{{ msg.name }}_signals.{{ signal.name }}_value = value;
}
{%- endfor %}
{%- endfor %}
