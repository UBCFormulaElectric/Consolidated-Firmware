{%- set func_return_value = name + "_return_value" -%}
{%- set func_call_count = name + "_call_count" -%}

// 
//  Fakes for: {{ name }}
//

static {{ return_type }} {{ func_return_value }};
static uint32_t {{ func_call_count }};

extern "C" 
{
    // Faked void function with no params.
    {{ return_type }} {{ name }}(void)
    {
        // Increment call count.
        {{ func_call_count }}++;

        // Return custom return value.
        return {{ func_return_value }};
    }
}

// Function to set the return value.
void fake_{{ name }}_returns({{return_type}} return_value)
{
    {{ func_return_value }} = return_value;
}

// Function to reset call count.
void fake_{{ name }}_reset() 
{
    memset(&{{ func_return_value }}, 0U, sizeof({{ return_type }}));
    {{ func_call_count }} = 0;
}

// Function to get the fake's call count.
uint32_t fake_{{ name }}_callCount(void)
{
    return {{ func_call_count }};
}