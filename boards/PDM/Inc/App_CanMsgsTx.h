/**
 * @file  App_CanMsgsTx.h
 * @brief Auto-generated CAN transmit library
 * @note  This file is auto-generated for PDM. !!! Do not modify !!!
 */
// clang-format off
#ifndef CANMSGS_TX_H
#define CANMSGS_TX_H
/******************************************************************************
 * Includes
 ******************************************************************************/
#include <stdint.h>
#include <stdbool.h>
#include "CanMsgs.h"
/******************************************************************************
 * Typedefs
 ******************************************************************************/
/**
 * @brief Function pointer for CAN payload packing function.
 * @note  This is supposed to match the function signature of the _pack
 *        functions generated by cantools. However, the second parameter of each
 *        _pack function is unique to each message struct but we must have one
 *        function pointer that works with every _pack function. The solution
 *        is to forcibly cast the type as void *.
 */
typedef int (*pack_payload_fn_ptr)(uint8_t *, const void *, size_t);

/**
 * @brief CAN transmit message table entry with the necessary information to
 *        send a CAN message periodically.
 */
struct CanTxPeriodicTableEntry
{
    pack_payload_fn_ptr pack_payload_fn;
    uint32_t stdid;
    uint32_t dlc;
    uint32_t period;
    const void * payload;
};

/** @brief A collection of all CAN messages being transmitted from PDM. */
struct CanTxPayloads
{
    struct CanMsgs_pdm_air_shutdown_t pdm_air_shutdown; /* Warning: This DLC of this message is 0 so its struct contains only a dummy variable */
    struct CanMsgs_pdm_motor_shutdown_t pdm_motor_shutdown; /* Warning: This DLC of this message is 0 so its struct contains only a dummy variable */
    struct CanMsgs_pdm_errors_t pdm_errors;
    struct CanMsgs_pdm_can_tx_fifo_overflow_t pdm_can_tx_fifo_overflow;
    struct CanMsgs_pdm_heartbeat_t pdm_heartbeat;
    struct CanMsgs_pdm_startup_t pdm_startup; /* Warning: This DLC of this message is 0 so its struct contains only a dummy variable */
    struct CanMsgs_pdm_aux1_aux2_current_t pdm_aux1_aux2_current;
    struct CanMsgs_pdm_cooling_pdmfan_current_t pdm_cooling_pdmfan_current;
    struct CanMsgs_pdm_airshdn_canglv_current_t pdm_airshdn_canglv_current;
    struct CanMsgs_pdm_accumulator_fan_current_t pdm_accumulator_fan_current;
    struct CanMsgs_pdm_inverter_io_current_t pdm_inverter_io_current;
    struct CanMsgs_pdm_glv_vbat_t pdm_glv_vbat;
    struct CanMsgs_pdm_flywire_t pdm_flywire;
};

/******************************************************************************
 * Function Prototypes
 ******************************************************************************/
/**
 * @brief Sends out periodic CAN messages according to the cycle time specified
 *        in the DBC. This should be called in a 1kHz task.
 */
void App_CanMsgsTx_PeriodicTransmit(void);

/**
 * @brief  Getter function for CAN transmit table
 * @return Pointer to CAN transmit table
 */
struct CanTxPeriodicTableEntry *App_CanMsgsTx_GetCanTxPeriodicTable(void);

/**
 * @brief Getter function for CAN transmit payloads (Non-periodic and periodic)
 * @return Pointer to CAN transmit payloads
 */
struct CanTxPayloads *App_CanMsgsTx_GetCanTxPayloads(void);

#endif /* CANMSGS_TX_H */
