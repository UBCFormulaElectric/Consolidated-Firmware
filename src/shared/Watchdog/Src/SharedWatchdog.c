/******************************************************************************
 * Includes
 ******************************************************************************/
#include "SharedWatchdog.h"
#include "Stdbool.h"

/******************************************************************************
 * Module Preprocessor Constants
 ******************************************************************************/
// clang-format off

/******************************************************************************
 * Module Preprocessor Macros
 ******************************************************************************/

/******************************************************************************
 * Module Typedefs
 ******************************************************************************/
// clang-format on

/******************************************************************************
 * Module Variable Definitions
 ******************************************************************************/
// IWDG_HandleTypeDef hiwdg is not initialized on system boot-up
static bool iwdg_initialized = false;

/******************************************************************************
 * Private Function Prototypes
 *******************************************************************************/

/******************************************************************************
 * Private Function Definitions
 ******************************************************************************/

/******************************************************************************
 * Function Definitions
 ******************************************************************************/
void SharedWatchdog_RefreshIwdg(void)
{
    if (SharedWatchdog_IsIwdgInitialized())
    {
        HAL_IWDG_Refresh(&hiwdg);
    }
}

void SharedWatchdog_SetIwdgInitialized(void)
{
    iwdg_initialized = true;
}

bool SharedWatchdog_IsIwdgInitialized(void)
{
    return iwdg_initialized;
}
